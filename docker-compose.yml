services:
  qwen-omni:
    build: .
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - HF_TOKEN=${HF_TOKEN}
      - MODEL_NAME=${MODEL_NAME:-Qwen/Qwen2.5-Omni-3B}
      - MODEL_PATH=${MODEL_PATH:-/models/Qwen2.5-Omni-3B}
      - WEBUI_PORT=${WEBUI_PORT:-7860}
    ports:
      - "${WEBUI_PORT:-7860}:7860"
    volumes:
      - model-cache:/models
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]

volumes:
  model-cache:
